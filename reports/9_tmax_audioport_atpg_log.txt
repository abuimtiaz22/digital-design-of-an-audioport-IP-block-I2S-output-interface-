set systemTime [clock seconds]
1746311505
puts "Script start time: [clock format $systemTime -format %H:%M:%S]"
Script start time: 01:31:45
set_environment_viewer -design_symbols primitives
#################################################################
# Read netlist and library
#################################################################
if {$POSTLAYOUT_ATPG == 1} {
    read_netlist ${RESULTS_DIR}/${DESIGN_NAME}_postlayout.v
} else {
    read_netlist ${RESULTS_DIR}/${DESIGN_NAME}_gatelevel.v
}
 Begin reading netlist ( results/audioport_gatelevel.v )...
 Warning: Rule N33 (Undefined port in netlist) was violated 10 times.
 End parsing Verilog file results/audioport_gatelevel.v with 0 errors.
 End reading netlist: #modules=1056, top=audioport, #lines=92196, CPU_time=0.72 sec, Memory=26MB
foreach tmax_library $TETRAMAX_LIBRARIES {
    read_netlist $tmax_library
}
 Begin reading netlist ( /research/cas/public/DT3_2025/lib/verilog/NangateOpenCellLibrary_tmax.v )...
 End parsing Verilog file /research/cas/public/DT3_2025/lib/verilog/NangateOpenCellLibrary_tmax.v with 0 errors.
 End reading netlist: #modules=118, top=XOR2_X2, #lines=5403, CPU_time=0.11 sec, Memory=0MB
#################################################################
# Build Model
#################################################################
foreach ruleid $TMAX_IGNORE_RULES {
    set_rules $ruleid ignore 
}
run_build_model ${DESIGN_NAME}
 ------------------------------------------------------------------------------
 Begin build model for topcut = audioport ...
 ------------------------------------------------------------------------------
 There were 259912 primitives and 16146 faultable pins removed during model optimizations
 Warning: Rule B8 (unconnected module input pin) was violated 22 times.
 Warning: Rule B9 (undriven module internal net) was violated 4 times.
 Warning: Rule B10 (unconnected module internal net) was violated 12 times.
 Warning: Rule N20 (underspecified UDP) was violated 1 times.
 End build model: #primitives=88286, CPU_time=1.24 sec, Memory=42MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.59 sec.
 ------------------------------------------------------------------------------
#################################################################
# Run Design Rules Check (DRC)
#################################################################
set_drc ${RESULTS_DIR}/${DESIGN_NAME}_gatelevel.spf  
set_drc -allow_unstable_set_reset ; # This setting is for autofixed internal resets
run_drc  
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file results/audioport_gatelevel.spf...
 End parsing STIL file results/audioport_gatelevel.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.05 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Test protocol simulation completed, CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 7571 scan_cells.
 Chain 2 successfully traced with 7570 scan_cells.
 Scan chain operation checking completed, CPU time=0.06 sec.
 ------------------------------------------------------------------------------
 Begin clock-gating analysis...
 1005 ATPG controllable clock-gating cells were found
 Setting scan_en_in(id=71) to 1 allows 99.78% of all scan cells to toggle.
 Clock-gating analysis completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Clock rules checking completed, CPU time=0.03 sec.
 Performing clock grouping analysis for 2 clocks.
 Clock grouping results: #pairs=0, #groups=0, #serial_pairs=0, #disturbed_pairs=0, CPU time=0.05 sec.
 ------------------------------------------------------------------------------
 Begin tracing connection cones...
 Tracing connection cones completed, CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=0  #DLAT=1005  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #TLA=1005
 Nonscan rules checking completed, CPU time=0.05 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=0(0), observe=0(0), detect=0(0), CPU time=0.01 sec
 DRC dependent learning completed, CPU time=0.13 sec.
 ------------------------------------------------------------------------------
 Begin set operation for load unload constant latches...
 Set operation for load unload constant latches completed, CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 No violations occurred during DRC process.
 Design rules checking was successful, total CPU time=0.92 sec.
 ------------------------------------------------------------------------------
#################################################################
# Add Faults
#################################################################
set_faults -model stuck
add_faults -all  
 327350 faults were added to fault list.
#################################################################
# Run ATPG
#################################################################
set_atpg -abort_limit $TMAX_ABORT_LIMIT  
if { $TMAX_CONTINUE_ATPG == 1 } {
    puts "Notice: continuing with previously saved patterns."
    remove_faults -all
    read_faults ${OUTPUT_DIR}/${DESIGN_NAME}_saved_faults.dat -retain
    set_patterns -external ${OUTPUT_DIR}/${DESIGN_NAME}_saved_patterns.bin -append
    set_patterns -internal
}
run_atpg -ndetects 1  
 ***********************************************************
 *  NOTICE:  The following DRC violations were previously  *
 *  encountered. The presence of these violations is an    *
 *  indicator that it is possible that the ATPG patterns   *
 *  created during this process may fail in simulation.    *
 *                                                         *
 *  Rules:  N20                                            *
 ***********************************************************
 ATPG performed for stuck fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #uncollapsed_faults=218213, abort_limit=20000...
 32         117928 100285         0/0/3    68.74%      5.32
 64          21414  78871         0/0/7    75.28%     10.73
 96           8382  70489        0/0/11    77.84%     15.42
 128          7712  62777        0/0/16    80.20%     21.53
 160          5316  57461        0/0/21    81.82%     27.50
 192          4594  52867        0/0/25    83.23%     35.30
 224          4807  48060        0/0/27    84.70%     39.25
 256          3793  44267        0/0/32    85.86%     48.72
 288          3168  41096        1/1/36    86.82%     52.91
 320          2693  38403        1/1/40    87.65%     60.37
 352          2916  35487        1/1/45    88.54%     67.18
 384          2354  33133        1/1/49    89.26%     74.24
 416          2714  30417        1/3/56    90.09%     86.14
 448          1620  28796        1/4/63    90.58%     96.94
 480          1857  26939        1/4/68    91.15%    102.31
 512          1713  25225        2/4/72    91.67%    109.85
 544          1616  23608        3/4/77    92.17%    116.85
 576          1355  22251        4/4/82    92.58%    124.79
 608          1573  20676        5/4/86    93.06%    128.51
 639          1664  19010        5/6/90    93.57%    131.59
 671          1193  17815        6/6/95    93.94%    136.16
 703          1124  16690        6/7/98    94.28%    138.67
 735          1094  15596       6/7/104    94.61%    150.50
 767          1043  14552       7/7/108    94.93%    155.80
 799          1041  13510       7/8/114    95.25%    168.79
 831           893  12616       7/9/119    95.52%    173.44
 863           881  11732      8/10/126    95.79%    181.79
 895           647  11084      8/11/132    95.99%    189.31
 927           629  10453      9/11/136    96.18%    198.66
 959           503   9948     10/11/140    96.34%    204.65
 991           584   9362     11/12/144    96.52%    212.24
 1023          662   8696     12/14/148    96.72%    220.01
 1055          569   8126     13/14/151    96.89%    223.15
 1087          532   7591     13/16/154    97.06%    233.39
 1119          509   7080     13/18/158    97.21%    236.52
 1151          444   6633     14/19/165    97.35%    252.63
 1183          395   6233     15/22/170    97.47%    259.44
 1215          489   5741     15/25/176    97.62%    271.77
 1247          419   5317     17/27/181    97.75%    279.21
 1279          312   4999     19/29/184    97.84%    286.40
 1311          305   4689     21/31/190    97.94%    295.40
 1343          274   4409     23/34/195    98.02%    301.91
 1375          300   4103     24/38/201    98.11%    310.19
 1407          233   3865     26/41/205    98.19%    319.13
 1439          258   3599     28/45/210    98.27%    328.06
 1471          193   3402     29/48/215    98.33%    339.35
 1503          204   3193     30/51/218    98.39%    345.34
 1535          170   3016     32/54/222    98.44%    354.82
 1567          198   2813     34/57/226    98.50%    360.32
 1599          199   2605     37/60/231    98.57%    366.15
 1631          182   2414     39/63/234    98.62%    368.19
 1663          129   2274     42/66/238    98.66%    377.89
 1695          162   2105     44/70/241    98.71%    383.88
 1727          177   1919     47/74/245    98.77%    392.86
 1759          135   1776     51/75/251    98.81%    401.53
 1791          114   1654     54/79/256    98.85%    410.97
 1823          106   1537     58/82/262    98.88%    418.22
 1854           93   1432     62/88/269    98.91%    424.91
 1886          115   1306     67/91/273    98.95%    434.78
 1917          128   1169     71/94/280    98.99%    447.24
 1949          102   1055     76/97/286    99.03%    457.19
 1980           77    962    82/102/290    99.05%    459.40
 2012           88    862    86/106/294    99.08%    462.75
 2044           87    760    91/112/298    99.11%    468.15
 2075           65    680    98/116/303    99.13%    475.03
 2107           70    594   104/121/309    99.16%    482.81
 2139           68    511   109/129/312    99.18%    490.12
 2171           70    429   114/134/315    99.21%    494.91
 2203           81    335   118/141/316    99.23%    496.56
 2233           60    258   125/145/316    99.25%    499.56
 2265           55    186   129/155/316    99.27%    499.64
 2287           48     79   146/184/317    99.30%    501.68
 1005 faults were identified as detected by implication, test coverage is now 99.60%.
 
     Uncollapsed Stuck Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT     325764
 Possibly detected                PT          0
 Undetectable                     UD        292
 ATPG untestable                  AU       1215
 Not detected                     ND         79
 -----------------------------------------------
 total faults                            327350
 test coverage                            99.60%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                        2287
     #basic_scan patterns                  2287
 -----------------------------------------------
#################################################################
# Write out results
#################################################################
report_faults -summary > ${REPORTS_DIR}/9_tmax_${DESIGN_NAME}_atpg_coverage.txt
report_faults -class NO > ${REPORTS_DIR}/9_tmax_${DESIGN_NAME}_not_observed_faults.txt
report_faults -class NC > ${REPORTS_DIR}/9_tmax_${DESIGN_NAME}_not_controlled_faults.txt
report_violations -all > ${REPORTS_DIR}/9_tmax_${DESIGN_NAME}_violations.txt
write_patterns ${RESULTS_DIR}/${DESIGN_NAME}_test_patterns.stil -internal -format Stil -parallel -replace
 Patterns written reference 6865 V statements, generating 17327025 test cycles
 End writing file 'audioport_test_patterns.stil' with 2287 patterns, File_size = 71196530, CPU_time = 4.0 sec.
write_patterns ${OUTPUT_DIR}/${DESIGN_NAME}_saved_patterns.bin -format binary -internal -replace
 End writing file 'audioport_saved_patterns.bin' with 2287 patterns, File_size = 17703788, CPU_time = 0.7 sec.
write_faults ${OUTPUT_DIR}/${DESIGN_NAME}_saved_faults.dat -all -replace
 Write faults completed: 327350 faults were written into file "output/audioport_saved_faults.dat".
set systemTime [clock seconds]
1746312019
puts "Script end time: [clock format $systemTime -format %H:%M:%S]"
Script end time: 01:40:19
if { $INTERACTIVE == 0} {
    exit
}
exit
set systemTime [clock seconds]
1746313333
puts "Script start time: [clock format $systemTime -format %H:%M:%S]"
Script start time: 02:02:13
set_environment_viewer -design_symbols primitives
#################################################################
# Read netlist and library
#################################################################
if {$POSTLAYOUT_ATPG == 1} {
    read_netlist ${RESULTS_DIR}/${DESIGN_NAME}_postlayout.v
} else {
    read_netlist ${RESULTS_DIR}/${DESIGN_NAME}_gatelevel.v
}
 Begin reading netlist ( results/audioport_gatelevel.v )...
 Warning: Rule N33 (Undefined port in netlist) was violated 10 times.
 End parsing Verilog file results/audioport_gatelevel.v with 0 errors.
 End reading netlist: #modules=1056, top=audioport, #lines=92196, CPU_time=0.77 sec, Memory=26MB
foreach tmax_library $TETRAMAX_LIBRARIES {
    read_netlist $tmax_library
}
 Begin reading netlist ( /research/cas/public/DT3_2025/lib/verilog/NangateOpenCellLibrary_tmax.v )...
 End parsing Verilog file /research/cas/public/DT3_2025/lib/verilog/NangateOpenCellLibrary_tmax.v with 0 errors.
 End reading netlist: #modules=118, top=XOR2_X2, #lines=5403, CPU_time=0.06 sec, Memory=0MB
#################################################################
# Build Model
#################################################################
foreach ruleid $TMAX_IGNORE_RULES {
    set_rules $ruleid ignore 
}
run_build_model ${DESIGN_NAME}
 ------------------------------------------------------------------------------
 Begin build model for topcut = audioport ...
 ------------------------------------------------------------------------------
 There were 259912 primitives and 16146 faultable pins removed during model optimizations
 Warning: Rule B8 (unconnected module input pin) was violated 22 times.
 Warning: Rule B9 (undriven module internal net) was violated 4 times.
 Warning: Rule B10 (unconnected module internal net) was violated 12 times.
 Warning: Rule N20 (underspecified UDP) was violated 1 times.
 End build model: #primitives=88286, CPU_time=1.24 sec, Memory=42MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.60 sec.
 ------------------------------------------------------------------------------
#################################################################
# Run Design Rules Check (DRC)
#################################################################
set_drc ${RESULTS_DIR}/${DESIGN_NAME}_gatelevel.spf  
set_drc -allow_unstable_set_reset ; # This setting is for autofixed internal resets
run_drc  
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file results/audioport_gatelevel.spf...
 End parsing STIL file results/audioport_gatelevel.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.05 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Test protocol simulation completed, CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 7571 scan_cells.
 Chain 2 successfully traced with 7570 scan_cells.
 Scan chain operation checking completed, CPU time=0.06 sec.
 ------------------------------------------------------------------------------
 Begin clock-gating analysis...
 1005 ATPG controllable clock-gating cells were found
 Setting scan_en_in(id=71) to 1 allows 99.78% of all scan cells to toggle.
 Clock-gating analysis completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Clock rules checking completed, CPU time=0.03 sec.
 Performing clock grouping analysis for 2 clocks.
 Clock grouping results: #pairs=0, #groups=0, #serial_pairs=0, #disturbed_pairs=0, CPU time=0.05 sec.
 ------------------------------------------------------------------------------
 Begin tracing connection cones...
 Tracing connection cones completed, CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=0  #DLAT=1005  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #TLA=1005
 Nonscan rules checking completed, CPU time=0.05 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=0(0), observe=0(0), detect=0(0), CPU time=0.01 sec
 DRC dependent learning completed, CPU time=0.13 sec.
 ------------------------------------------------------------------------------
 Begin set operation for load unload constant latches...
 Set operation for load unload constant latches completed, CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 No violations occurred during DRC process.
 Design rules checking was successful, total CPU time=0.94 sec.
 ------------------------------------------------------------------------------
#################################################################
# Add Faults
#################################################################
set_faults -model stuck
add_faults -all  
 327350 faults were added to fault list.
#################################################################
# Run ATPG
#################################################################
set_atpg -abort_limit $TMAX_ABORT_LIMIT  
if { $TMAX_CONTINUE_ATPG == 1 } {
    puts "Notice: continuing with previously saved patterns."
    remove_faults -all
    read_faults ${OUTPUT_DIR}/${DESIGN_NAME}_saved_faults.dat -retain
    set_patterns -external ${OUTPUT_DIR}/${DESIGN_NAME}_saved_patterns.bin -append
    set_patterns -internal
}
Notice: continuing with previously saved patterns.
 327350 faults were removed from the fault list.
 327350 faults were read in and 327350 new faults were added to fault list.
 End parsing binary file output/audioport_saved_patterns.bin with 0 errors.
 End reading 2287 patterns, CPU_time = 0.03 sec, Memory = 17MB
 Warning: Current external pattern set is now deleted. (M134)
run_atpg -ndetects 1  
 ***********************************************************
 *  NOTICE:  The following DRC violations were previously  *
 *  encountered. The presence of these violations is an    *
 *  indicator that it is possible that the ATPG patterns   *
 *  created during this process may fail in simulation.    *
 *                                                         *
 *  Rules:  N20                                            *
 ***********************************************************
 ATPG performed for stuck fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #uncollapsed_faults=79, abort_limit=100000...
 2291            6     73      0/184/54    99.61%    437.41
 
     Uncollapsed Stuck Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT     325770
 Possibly detected                PT          0
 Undetectable                     UD        292
 ATPG untestable                  AU       1215
 Not detected                     ND         73
 -----------------------------------------------
 total faults                            327350
 test coverage                            99.61%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                        2291
     #basic_scan patterns                  2291
 -----------------------------------------------
#################################################################
# Write out results
#################################################################
report_faults -summary > ${REPORTS_DIR}/9_tmax_${DESIGN_NAME}_atpg_coverage.txt
report_faults -class NO > ${REPORTS_DIR}/9_tmax_${DESIGN_NAME}_not_observed_faults.txt
report_faults -class NC > ${REPORTS_DIR}/9_tmax_${DESIGN_NAME}_not_controlled_faults.txt
report_violations -all > ${REPORTS_DIR}/9_tmax_${DESIGN_NAME}_violations.txt
write_patterns ${RESULTS_DIR}/${DESIGN_NAME}_test_patterns.stil -internal -format Stil -parallel -replace
 Patterns written reference 6877 V statements, generating 17357317 test cycles
 End writing file 'audioport_test_patterns.stil' with 2291 patterns, File_size = 71318990, CPU_time = 3.9 sec.
write_patterns ${OUTPUT_DIR}/${DESIGN_NAME}_saved_patterns.bin -format binary -internal -replace
 End writing file 'audioport_saved_patterns.bin' with 2291 patterns, File_size = 17734780, CPU_time = 0.7 sec.
write_faults ${OUTPUT_DIR}/${DESIGN_NAME}_saved_faults.dat -all -replace
 Write faults completed: 327350 faults were written into file "output/audioport_saved_faults.dat".
set systemTime [clock seconds]
1746313783
puts "Script end time: [clock format $systemTime -format %H:%M:%S]"
Script end time: 02:09:43
if { $INTERACTIVE == 0} {
    exit
}
exit
